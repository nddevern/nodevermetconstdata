;code by Nodever2. Special thanks to Kejardon, who really halped me understand these routines, to Smiley for pointing me in the right direction, and to Scyzer for helping me a bit with labels and stuff.
lorom

!Freespace = $84F570	;you can change this to other free space in bank $84. It is by default at PC address $027570

org $84D836
dw Code				;overwrite original function call for left-facing eye door's shot reaction
org $84D96D
dw Code				;overwrite original function call for right-facing eye door's shot reaction

org !Freespace			;new routine which is based off $84BD50 but adds charge vulnerability
Code:
LDA $1D77,x				;\
BEQ RETURN				;} If not shot: return
  
AND #$FFF0				;\
CMP #$9010				;\ If you wanted to change which beam hurts the eye door, this value is what you'd want to change.
BEQ BRANCH_MISSILE		;} If shot with charge beam: go to BRANCH_MISSILE (eye door acts as if it was shot by a missile)

LDA $1D77,x 			;\
AND #$0F00				;\
CMP #$0200				;} If shot with super missile: go to BRANCH_SUPER
BEQ BRANCH_SUPER		;/
CMP #$0100				;\
BNE BRANCH_DUD			;} If not shot with missile: go to BRANCH_DUD
BRA BRANCH_MISSILE

;below are all links back to the original routines that the game would jump to
RETURN:
JMP $BD7B

BRANCH_MISSILE:
JMP $BD62

BRANCH_DUD: 
JMP $BD74

BRANCH_SUPER:
JMP $BD7F
